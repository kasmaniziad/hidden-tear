// http://www.dotnettricks.com/learn/mvc/aspnet-mvc-request-life-cycle
// https://www.exceptionnotfound.net/getting-started-with-dependency-injection-in-asp-net-core/
// https://abhijitjana.net/2010/03/14/beginner%E2%80%99s-guide-how-iis-process-asp-net-request/

to access a web application from several locations, we need to host it.

place where we can host our application is called web server.

Microsoft web server is IIS (Internet Information Server).

this is used to host ASP.NET applications.

it has its own ASP.NET Process Engine to process ASP.NET requests.

1. Worker Process - its responsible for handling request and response for each application from 		    the client.

2.Application Pool - it is a container for worker process.

App Pool with multiple worker process is called web garden.



IIS Architecture 6.0

1. Kernel Mode.
2. User Mode.


1. Kernel Mode 
 
When request come from client, it will hit HTTP.SYS

HTTP.SYS passes it to corresponding App Pool (it is not random, whenever we create App Pool, it is registered with HTTP.SYS.

Now when Client requests for some information it hits HTTP.SYS i.e Kernel Mode of IIS.
HTTP.SYS identifies the name of the application pool where he will send the request.

2. Uer Mode

Web Admin Services (WAS) takes request from HTTP.SYS and passes it to respective application pool.

When Application pool receives the request, it will pass it to worker process. (w3wp.exe).

the worker process looks up the URL of the request to load the correct ISAPI extension.

(ISAPI extensions are IIS ways to handle request for different resources).

When we install ASP.NET it installs its ISAPI extension (aspnet_isapi.dll) and adds mapping to IIS.

when worker process loads the aspnet_isapi.dll, it will start HTTPRuntime which is entry point of an application.

This HTTPRuntime calls the ProcessRequest method to start Processing.

Now after this each and every request should pass through the corresponding HTTPModule to reach HTTPHandler.

HTTPHandler is responsible for generating output for the requested resource.


Overview **

When client request for some information from a web server, request first reaches to HTTP.SYS of IIS. HTTP.SYS then send the request to respective  Application Pool. Application Pool then forward the request to worker process to load the ISAPI Extension which will create an HTTPRuntime Object to Process the request via HTTPModule and HTTPHanlder. After that the ASP.NET Page LifeCycle events starts.

In case of MVC

we have URLRoutingModule which does a pattern matching in the routing Table (Each MVC application registers thier route patterns in routing table when they start) and when a match is found the routing engine fowards the request to the corresponding IRouteHandler. which in turn calls The MVC handler.

MVC handler then executes ProcessRequest and uses IControllerFactory to get a IController Instance.

If sucessfull then execute method is called.

Once controller has been instainted, Controller ActionInvker determines which action ahs to be executed.

Once Action is executed it returns result by returning return type, it can also be a view.

First step while returning view is o choose the view engine to render the view. Default is Razor





Angular 2 demo

https://devblog.dymel.pl/2016/09/08/aspnet-core-with-angular2-tutorial/

npm config set strict-ssl false